"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[105],{4181:(y,v,a)=>{a.r(v),a.d(v,{OrdersModule:()=>et});var i=a(6895),_=a(529),m=a(4006),l=a(8277),c=a(3238),p=a(8796),t=a(4650);let u=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[i.ez]}),r})();var s=a(9657),g=a(1961),h=a(6738),T=a(2712),q=a(3677),C=a(8173),M=a(1689),P=a(508),b=a(1410),f=a(1048),D=a(5861),O=a(5990),J=a(9812),z=a(6129),S=a(3162),F=a(8446),Y=a(6172),j=a(4724);const x=function(r){return["details",r]};function Q(r,n){if(1&r&&(t.ynx(0),t.TgZ(1,"tr",20)(2,"td")(3,"h2",24)(4,"a",25)(5,"b"),t._uU(6),t.qZA()()()(),t.TgZ(7,"td",21),t._uU(8),t.ALo(9,"uppercase"),t.qZA(),t.TgZ(10,"td",21),t._uU(11),t.ALo(12,"uppercase"),t.qZA(),t.TgZ(13,"td",21)(14,"div",26),t._uU(15),t.ALo(16,"uppercase"),t.qZA()(),t.TgZ(17,"td",21)(18,"h2",27),t._UZ(19,"i",28),t._uU(20),t.ALo(21,"number"),t.qZA()(),t.TgZ(22,"td",21),t._uU(23),t.ALo(24,"date"),t._UZ(25,"br"),t.TgZ(26,"small"),t._uU(27),t.ALo(28,"date"),t.qZA()(),t.TgZ(29,"td",22)(30,"div",29)(31,"button",30),t._UZ(32,"i",31),t._uU(33," Details "),t.qZA()()()(),t.BQk()),2&r){const e=n.$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(23,x,e.channel_order_id)),t.xp6(2),t.hij(" #",e.channel_order_id," "),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.payment_method)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.payment_status)," "),t.xp6(4),t.hij(" ",t.lcZ(16,13,e.status)," "),t.xp6(5),t.hij(" \xa0 ",t.lcZ(21,15,e.total)," "),t.xp6(3),t.hij(" ",t.xi3(24,17,e.created_at,"d MMM, y")," "),t.xp6(4),t.Oqu(t.xi3(28,20,e.created_at,"hh:mm a")),t.xp6(4),t.Q6J("routerLink",t.VKq(25,x,e.id))}}function R(r,n){if(1&r&&(t.TgZ(0,"div",3)(1,"div",6)(2,"div",18)(3,"table",19)(4,"thead")(5,"tr",20)(6,"th"),t._uU(7,"Order ID"),t.qZA(),t.TgZ(8,"th",21),t._uU(9,"Payment Method"),t.qZA(),t.TgZ(10,"th",21),t._uU(11,"Payment Status"),t.qZA(),t.TgZ(12,"th",21),t._uU(13,"Order Status"),t.qZA(),t.TgZ(14,"th",21),t._uU(15,"Amount"),t.qZA(),t.TgZ(16,"th",21),t._uU(17,"Created At"),t.qZA(),t.TgZ(18,"th",22),t._uU(19,"Actions \xa0"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,Q,34,27,"ng-container",23),t.qZA()()()()()),2&r){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.pageData.docs)}}function w(r,n){1&r&&t._UZ(0,"mat-progress-bar",32)}function N(r,n){if(1&r&&(t.ynx(0),t._UZ(1,"app-pagination",33),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("route","/orders")("pageData",e.pageData)("pageSize",e.pageSize)("orderStatus",e.UrlParamOrderStatus)("currentPage",e.page)}}let B=(()=>{class r{constructor(e,o,d,Z){this.orderService=e,this.uiService=o,this.route=d,this.fb=Z,this.orderStatus=O.iF,this.paymentStatus=O.bG,this.paymentMethod=O.XL,this.dataIsLoaded=!1,this.page=1,this.vendors=[],this.pageSize=10,this.UrlParamOrderStatus="",this.pageData={count:0,docs:[]},this.showFilter=!1,this.isFilterApplied=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.dataIsLoaded=!1,this.page=+e.page?+e.page:this.page,this.UrlParamOrderStatus=e.orderStatus,this.pageSize=+e.pageSize?+e.pageSize:this.pageSize,this.selectedOrderStatus=e.orderStatus,this.initForm(),this.fetchOrders()})}initForm(){let e=localStorage.getItem("orderFilter"),o={createdAt:[null],paymentMethod:[null]};if(e){this.isFilterApplied=!0;let d=JSON.parse(e);o.createdAt=[d.createdAt],o.paymentMethod=[d.paymentMethod]}this.filterForm=this.fb.group(o)}applyFilter(e){this.isFilterApplied=!0,this.page=1,localStorage.setItem("orderFilter",JSON.stringify(e)),this.fetchOrders()}clearFilter(){this.filterForm.reset(),this.isFilterApplied=!1,localStorage.removeItem("orderFilter"),this.fetchOrders()}onChangePageSize(e){this.dataIsLoaded=!1,this.pageSize=+e.target.value,this.fetchOrders()}fetchOrders(){var e=this;return(0,D.Z)(function*(){e.dataIsLoaded=!1,e.pageData.count=0,e.pageData.docs=[];try{let o=yield e.orderService.getShipRocketOrders({textSearch:e.textSearch,page:e.page,pageSize:e.pageSize});e.pageData.docs=o.data.data,e.pageData.count=o.data.meta.pagination.total,e.dataIsLoaded=!0}catch{e.dataIsLoaded=!1}})()}onSearch(e){this.textSearch=e,this.page=1,this.fetchOrders()}getProductImg(e){return e?.images.length?e.images[0]:""}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(b.p),t.Y36(J.F),t.Y36(f.gz),t.Y36(m.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-order"]],decls:21,vars:4,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],[1,"page-header"],[1,"row"],[1,"col-sm-7","col-auto"],[1,"page-title"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row","w-100"],[1,"app-pagesize-dropdown","col",3,"pageSize","selectedPageSize"],[1,"col"],[1,"d-flex","align-content-center","float-right"],[1,"float-lg-right",3,"inputText"],["class","row",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[4,"ngIf"],[1,"table-responsive"],["id","DataTables_Table_0","role","grid","aria-describedby","DataTables_Table_0_info",1,"table","table-hover","table-center","mb-0","dataTable","no-footer","table-bordered"],["role","row"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"table-avatar","cursor"],[1,"text-primary",3,"routerLink"],[1,"btn-group"],[1,"table-avatar"],[1,"fa","fa-inr"],[1,"actions"],[1,"btn","btn-sm","btn-outline-info",3,"routerLink"],[1,"fe","fe-eye"],["mode","indeterminate"],[1,"row","p-2",3,"route","pageData","pageSize","orderStatus","currentPage"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"All Orders"),t.qZA()()()(),t.TgZ(7,"div",3)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),t.NdJ("selectedPageSize",function(Z){return o.onChangePageSize(Z)}),t.qZA(),t.TgZ(14,"div",12)(15,"div",13)(16,"app-search-input",14),t.NdJ("inputText",function(Z){return o.onSearch(Z)}),t.qZA()()()(),t.YNc(17,R,22,1,"div",15),t.YNc(18,w,1,0,"mat-progress-bar",16),t.qZA(),t.YNc(19,N,2,5,"ng-container",17),t.qZA()()()()()(),t._UZ(20,"app-delete-modal")),2&e&&(t.xp6(13),t.Q6J("pageSize",o.pageSize),t.xp6(4),t.Q6J("ngIf",o.dataIsLoaded),t.xp6(1),t.Q6J("ngIf",!o.dataIsLoaded),t.xp6(1),t.Q6J("ngIf",o.dataIsLoaded))},dependencies:[i.sg,i.O5,f.rH,f.yS,z.z,S.pW,F.Q,Y.C,j.J,i.gd,i.JJ,i.uU],styles:[".avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:cover}"]}),r})();var E=a(2502),V=a(5144);const U=function(r){return["/products/update",r]},L=function(){return{mode:"VIEW"}};function G(r,n){if(1&r&&(t.TgZ(0,"tr")(1,"td")(2,"h2",29)(3,"a",30),t._UZ(4,"img",31),t.qZA(),t.TgZ(5,"a",32),t._uU(6),t.ALo(7,"elipsis"),t.qZA()()(),t.TgZ(8,"td",27),t._uU(9),t.qZA(),t.TgZ(10,"td",27),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td",27),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&r){const e=n.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(16,U,e.product._id))("queryParams",t.DdM(18,L)),t.xp6(1),t.Q6J("src",e.product.images.length?e.product.images[0].sm:"assets/img/patients/patient.jpg",t.LSH)("alt",e.product.name),t.xp6(1),t.Q6J("routerLink",t.VKq(19,U,e.product._id))("queryParams",t.DdM(21,L)),t.xp6(1),t.hij("",t.lcZ(7,10,e.product.name)," "),t.xp6(3),t.Oqu(e.qty),t.xp6(2),t.hij(" ",t.lcZ(12,12,e.product.sellingPrice)," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,e.qty*e.product.sellingPrice)," ")}}function K(r,n){if(1&r&&(t.TgZ(0,"tbody"),t.YNc(1,G,16,22,"tr",28),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.order.items)}}function W(r,n){if(1&r&&(t.TgZ(0,"div",13)(1,"div",22)(2,"div",23)(3,"div",3)(4,"div",24)(5,"h4"),t._uU(6),t.ALo(7,"uppercase"),t.ALo(8,"uppercase"),t.qZA()(),t._UZ(9,"div",24),t.qZA()(),t.TgZ(10,"div",25)(11,"div",26)(12,"table",15)(13,"thead")(14,"tr")(15,"th"),t._uU(16,"Product"),t.qZA(),t.TgZ(17,"th",27),t._uU(18,"Quantity"),t.qZA(),t.TgZ(19,"th",27),t._uU(20,"Price"),t.qZA(),t.TgZ(21,"th",27),t._uU(22,"Total"),t.qZA()()(),t._UZ(23,"tbody"),t.YNc(24,K,2,1,"tbody",10),t.qZA()()()()()),2&r){const e=t.oxw(2);t.xp6(6),t.AsE(" Ordered Items | ",t.lcZ(7,3,e.order.paymentMethod)," | ",t.lcZ(8,5,null==e.SROrderInfo||null==e.SROrderInfo.data?null:e.SROrderInfo.data.status)," "),t.xp6(18),t.Q6J("ngIf",e.order)}}function X(r,n){if(1&r&&(t.TgZ(0,"div",13)(1,"div",23)(2,"h4")(3,"b"),t._uU(4,"Shipping Address"),t.qZA(),t._uU(5," \xa0"),t._UZ(6,"i",33),t.qZA()(),t.TgZ(7,"div",14)(8,"div")(9,"div",34)(10,"label")(11,"b"),t._uU(12,"Name: "),t.qZA(),t._uU(13),t.qZA()(),t.TgZ(14,"div",34)(15,"label")(16,"b"),t._uU(17,"Mobile Number: "),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"div",34)(20,"label")(21,"b"),t._uU(22,"City: "),t.qZA(),t._uU(23),t.qZA()(),t.TgZ(24,"div",34)(25,"label")(26,"b"),t._uU(27,"PinCode: "),t.qZA(),t._uU(28),t.qZA()(),t.TgZ(29,"div",34)(30,"label")(31,"b"),t._uU(32,"Address: "),t.qZA(),t._uU(33),t.qZA()()()()()),2&r){const e=t.oxw(2);t.xp6(13),t.hij(" ",e.SROrderInfo.data.customer_name," "),t.xp6(5),t.hij(" ",e.SROrderInfo.data.customer_phone,""),t.xp6(5),t.hij(" ",e.SROrderInfo.data.customer_city,""),t.xp6(5),t.hij(" ",e.SROrderInfo.data.customer_pincode,""),t.xp6(5),t.hij(" ",e.SROrderInfo.data.customer_address,"")}}function H(r,n){if(1&r&&(t.ynx(0),t.YNc(1,W,25,7,"div",12),t.TgZ(2,"div",13)(3,"div",14)(4,"table",15)(5,"thead")(6,"tr"),t._UZ(7,"th",16)(8,"th",17),t.qZA()(),t.TgZ(9,"tbody")(10,"tr")(11,"th",18)(12,"h5")(13,"b"),t._uU(14,"Total"),t.qZA()()(),t.TgZ(15,"td"),t._UZ(16,"i",19),t.TgZ(17,"span",20),t._uU(18),t.ALo(19,"number"),t.qZA()()()()()()(),t.TgZ(20,"div",3)(21,"div",21),t.YNc(22,X,34,5,"div",12),t.qZA()(),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.order),t.xp6(17),t.hij(" ",t.xi3(19,3,null==e.order?null:e.order.total,".2")," "),t.xp6(4),t.Q6J("ngIf",e.SROrderInfo)}}function $(r,n){1&r&&t._UZ(0,"mat-progress-bar",35)}const k=[{path:"",component:B},{path:"details/:orderId",component:(()=>{class r{constructor(e,o,d){this.route=e,this.orderService=o,this.location=d,this.apiuri=E.N.apiUrl,this.paymentStatus=O.bG,this.dataIsLoaded=!1,this.subTotal=0,this.grandTotal=0,this.discount=0}ngOnInit(){this.fetchOrder()}fetchOrder(){this.route.params.subscribe(e=>{e.orderId&&this.orderService.fetchOrder(e.orderId).then(o=>{this.order=o.data.order,this.SROrderInfo=o.data.SROrderInfo,this.dataIsLoaded=!0,this.discount=Math.ceil(this.discount)})})}downloadPdf(e,o){this.orderService.getPdf(e).subscribe(d=>{var Z=new Blob([d],{type:"application/pdf"}),I=URL.createObjectURL(Z);window.open(I);var A=document.createElement("a");A.href=I,A.target="_blank",A.download="bill.pdf",document.body.appendChild(A),A.click()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.gz),t.Y36(b.p),t.Y36(i.Ye))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-detail"]],decls:24,vars:6,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],[1,"page-header"],[1,"row"],[1,"col-sm-7","col-auto"],[1,"page-title"],[1,"col-sm-5","col"],[1,"btn","btn-primary","btn-sm","float-right","mt-2",3,"click"],[1,"fa","fa-arrow-left"],[1,"col-sm-12"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"table","table-bordered"],["width","80%",1,"bg-white"],["width","20%",1,"bg-white"],[1,"text-right"],[1,"fa","fa-inr",2,"font-size","18px"],[2,"font-size","18px","font-weight","500"],[1,"col-12","col-md-6"],[1,"vendors"],[1,"card-header"],[1,"col-md-6","col-12"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"table-avatar"],[1,"avatar","avatar-sm","mr-2",3,"routerLink","queryParams"],[1,"avatar-img","rounded-circle",3,"src","alt"],[3,"routerLink","queryParams"],[1,"fa","fa-check-circle-o","text-success","fa-1x"],[1,"m-1"],["mode","indeterminate"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6," Order "),t.TgZ(7,"small"),t._uU(8),t.qZA()(),t.TgZ(9,"h5"),t._uU(10," Date: "),t.TgZ(11,"small"),t._uU(12),t.ALo(13,"date"),t.qZA()()(),t.TgZ(14,"div",6)(15,"button",7),t.NdJ("click",function(){return o.location.back()}),t._UZ(16,"i",8),t._uU(17," Back"),t.qZA()()()(),t.TgZ(18,"div",3)(19,"div",9),t.YNc(20,H,23,6,"ng-container",10),t.YNc(21,$,1,0,"mat-progress-bar",11),t.qZA()()()(),t._UZ(22,"br")(23,"br")),2&e&&(t.xp6(8),t.hij("#",null==o.order?null:o.order.orderId,""),t.xp6(4),t.Oqu(t.lcZ(13,4,null==o.order?null:o.order.createdAt)),t.xp6(8),t.Q6J("ngIf",o.dataIsLoaded),t.xp6(1),t.Q6J("ngIf",!o.dataIsLoaded))},dependencies:[i.sg,i.O5,f.yS,S.pW,i.gd,i.JJ,i.uU,V.p],styles:[".avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:cover}"]}),r})()}];let tt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.Bz.forChild(k),f.Bz]}),r})(),et=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[b.p,{provide:_.TP,useClass:g.s,multi:!0},{provide:c._A,useClass:l.t7,deps:[c.Ad,l.o8]},{provide:c.sG,useValue:{parse:{dateInput:"LL"},display:{dateInput:"LL",dateA11yLabel:"LL",monthYearLabel:"MMM YYYY",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[i.ez,tt,_.JF,m.UX,P.m,T.q,C.u,q.I,M.n,h.a,s.E,u,p.A0]}),r})()},9808:(y,v,a)=>{a.d(v,{n:()=>_});var i=a(6805);function _(m,l){const c="object"==typeof l;return new Promise((p,t)=>{let s,u=!1;m.subscribe({next:g=>{s=g,u=!0},error:t,complete:()=>{u?p(s):c?p(l.defaultValue):t(new i.K)}})})}},5861:(y,v,a)=>{function i(m,l,c,p,t,u,s){try{var g=m[u](s),h=g.value}catch(T){return void c(T)}g.done?l(h):Promise.resolve(h).then(p,t)}function _(m){return function(){var l=this,c=arguments;return new Promise(function(p,t){var u=m.apply(l,c);function s(h){i(u,p,t,s,g,"next",h)}function g(h){i(u,p,t,s,g,"throw",h)}s(void 0)})}}a.d(v,{Z:()=>_})}}]);